# W1 Day2 對話紀錄（2025-09-25）

## 今日目標
- 任務A：練習 Python 模組拆分與函式撰寫  
- 任務B：實作日期轉換工具 & log function（含 pytest 測試）

---

## 任務A：模組拆分 & 函式撰寫
- **操作內容**：  
  - 請小D產出 `math_utils.py`，內含加減乘除（額外還有 power/is_even/PI/E 等函式）。  
  - 建立 `main.py` 呼叫模組，示範 import 多種寫法。  
- **AI 輔助**：  
  - 小D負責產生程式骨架。  
  - 瓶仔協助驗收、補 pytest 測試案例（含參數化、例外測試、數學性質檢查）。  
- **結果**：  
  - 全部測試通過 ✅  
  - 學會如何把運算邏輯抽離成模組，並用 pytest 驗證。

---

## 任務B：日期轉換工具 & log function
- **操作內容**：  
  - 撰寫 `time_utils.py`：提供 `parse_dt / to_timezone / format_dt / convert_format / now_tz / dt_to_unix / unix_to_dt` 等函式。  
  - 撰寫 `logger_utils.py`：封裝 Python 內建 `logging`，提供 `get_logger()`（console + file handler）與 `log_event()`（JSONL 格式）。  
  - 製作測試檔：`test_time_utils.py`、`test_logger_utils.py`。  
- **AI 輔助**：  
  - 瓶仔先提供 TDD 測試，再補上完整模組實作。  
  - 小D 輔助講解 Python 內建 logging 模組特性。  
- **踩坑 & 解法**：  
  - ❌ `ZoneInfoNotFoundError` → 環境缺 IANA 時區資料。  
    - 解法：安裝 `tzdata`，或改用 offset 驗證。  
  - ❌ JSON log 測試失敗 → 預設 `json.dumps` 帶空格，與測試比對字串不同。  
    - 解法：改用 `separators=(",", ":")` 產生緊湊 JSON，或調整測試解析 JSON。  
- **結果**：  
  - 全部測試通過 ✅  
  - 成功輸出 log 檔案（文字格式 & JSONL 格式）。

---

## 今日收穫
1. 理解 Python `logging` 模組的基礎用法與自訂封裝。  
2. 熟悉 `zoneinfo` / `tzdata` 處理跨時區轉換。  
3. 學會設計 **可測試的工具模組**，並透過 pytest 驗證功能完整性。  
4. 體驗到 **TDD 流程**：先寫測試，再補實作，最後一次跑過驗收。  

---

## 明日計畫（W1 Day3）
- 任務A：設計 CLI Bot 指令系統（子命令 routing）。  
- 任務B：加入錯誤處理與測試，逐步延伸至 Telegram Bot。  
